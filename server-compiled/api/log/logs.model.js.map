{"version":3,"sources":["api/log/logs.model.js"],"names":["mongoose","require","Promise","Schema","twoWeeks","Logs","created","type","Date","default","now","path","String","method","body","Object","params","query","statusCode","Number","statusMessage","isError","Boolean","indexes","expireAfterSeconds","methods","createErrorLog","req","res","module","exports","model"],"mappings":"AAAA;;AAEA;;;;;;AACA,IAAMA,WAAWC,QAAQ,UAAR,CAAjB;AACAD,SAASE,OAAT,GAAmBD,QAAQ,UAAR,CAAnB;AACA,IAAME,SAASH,SAASG,MAAxB;;AAEA;AACA,IAAMC,WAAW,OAAjB;;AAEA,IAAMC,OAAO,IAAIF,MAAJ,CAAW;AACtB;AACAG,WAAS;AACPC,UAAMC,IADC;AAEPC,aAASD,KAAKE;AAFP,GAFa;AAMtB;AACAC,QAAMC,MAPgB;AAQtB;AACAC,UAAQD,MATc;AAUtB;AACAE,QAAMC,MAXgB;AAYtB;AACAC,UAAQD,MAbc;AActB;AACAE,SAAOF,MAfe;AAgBtB;AACAG,cAAYC,MAjBU;AAkBtB;AACAC,iBAAeR,MAnBO;AAoBtB;AACAS,WAAS,EAACd,MAAMe,OAAP,EAAgBb,SAAS,KAAzB;AArBa,CAAX,CAAb;;AAwBA;AACA,IAAMc,UAAU;AACd;AACA,CAAC,EAACjB,SAAS,CAAV,EAAD,EAAe,EAACkB,oBAAoBpB,QAArB,EAAf,CAFc,CAAhB;AAIA,uBAAcC,IAAd,EAAoBkB,OAApB;;AAEAlB,KAAKoB,OAAL,GAAe;AACb;;;;;;;AAOAC,gBARa,0BAQEC,GARF,EAQOC,GARP,EAQY,CAExB;AAVY,CAAf;;AAaAC,OAAOC,OAAP,GAAiB9B,SAAS+B,KAAT,CAAe,KAAf,EAAsB1B,IAAtB,CAAjB","file":"api/log/logs.model.js","sourcesContent":["'use strict';\n\nimport createIndexes from '../../config/indexDb';\nconst mongoose = require('mongoose');\nmongoose.Promise = require('bluebird');\nconst Schema = mongoose.Schema;\n\n// Two weeks in seconds\nconst twoWeeks = 1209600;\n\nconst Logs = new Schema({\n  // When original record is created\n  created: {\n    type: Date,\n    default: Date.now\n  },\n  // Path requested\n  path: String,\n  // Request method\n  method: String,\n  // Request body\n  body: Object,\n  // Request params\n  params: Object,\n  // Request query\n  query: Object,\n  // Response status code\n  statusCode: Number,\n  // Response status message\n  statusMessage: String,\n  // Is error log\n  isError: {type: Boolean, default: false}\n});\n\n// Indexes\nconst indexes = [\n  // Unique card index\n  [{created: 1}, {expireAfterSeconds: twoWeeks}]\n];\ncreateIndexes(Logs, indexes);\n\nLogs.methods = {\n  /**\n   * Create an error log\n   * @param req\n   * @param res\n   *\n   * @todo Make me a real boy\n   */\n  createErrorLog(req, res) {\n\n  }\n};\n\nmodule.exports = mongoose.model('Log', Logs);\n"],"sourceRoot":"/home/ubuntu14/works/webstromProjects/gcmgr/gulp/es6"}