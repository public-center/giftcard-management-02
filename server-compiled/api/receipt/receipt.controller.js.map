{"version":3,"sources":["api/receipt/receipt.controller.js"],"names":["getReceipt","req","res","findById","params","receiptId","populate","path","model","then","json","receipt","catch","err","console","log","create","method","controller","revision","stack","error","status"],"mappings":";;;;;QAQgBA,U,GAAAA,U;;AARhB;;;;AAEA;;;;AACA;;;;;;AAEA;;;AAGO,SAASA,UAAT,CAAoBC,GAApB,EAAyBC,GAAzB,EAA8B;AAAA;;AACnC,oBAAQC,QAAR,CAAiBF,IAAIG,MAAJ,CAAWC,SAA5B,EACGC,QADH,CACY,UADZ,EAEGA,QAFH,CAEY,OAFZ,EAGGA,QAHH,CAGY;AACRC,UAAM,MADE;AAERD,cAAU,CACR;AACEC,YAAM,OADR;AAEEC,aAAO;AAFT,KADQ,EAKR;AACED,YAAM,SADR;AAEEC,aAAO;AAFT,KALQ;AAFF,GAHZ,EAgBGF,QAhBH,CAgBY;AACRC,UAAM,aADE;AAERD,cAAU,CAAC;AACTC,YAAM,MADG;AAETC,aAAO;AAFE,KAAD,EAGP;AACDD,YAAM,UADL;AAEDC,aAAO;AAFN,KAHO;AAFF,GAhBZ,EA0BGC,IA1BH,CA0BQ;AAAA,WAAWP,IAAIQ,IAAJ,CAASC,OAAT,CAAX;AAAA,GA1BR,EA2BGC,KA3BH;AAAA,uEA2BS,iBAAMC,GAAN;AAAA;AAAA;AAAA;AAAA;AACLC,sBAAQC,GAAR,CAAY,4CAAZ;AACAD,sBAAQC,GAAR,CAAYF,GAAZ;AAFK;AAAA,qBAGC,mBAASG,MAAT,CAAgB;AACpBC,wBAAQ,YADY;AAEpBC,4BAAY,oBAFQ;AAGpBC,0BAAU,wBAHU;AAIpBC,uBAAOP,IAAIO,KAJS;AAKpBC,uBAAOR;AALa,eAAhB,CAHD;;AAAA;AAAA,+CAUEX,IAAIoB,MAAJ,CAAW,GAAX,EAAgBZ,IAAhB,CAAqBG,GAArB,CAVF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KA3BT;;AAAA;AAAA;AAAA;AAAA;AAuCD","file":"api/receipt/receipt.controller.js","sourcesContent":["import Receipt from './receipt.model';\n\nimport ErrorLog from '../errorLog/errorLog.model';\nimport {getGitRev} from '../../helpers/errors';\n\n/**\n * Retrieve a receipt\n */\nexport function getReceipt(req, res) {\n  Receipt.findById(req.params.receiptId)\n    .populate('customer')\n    .populate('store')\n    .populate({\n      path: 'user',\n      populate: [\n        {\n          path: 'store',\n          model: 'Store'\n        },\n        {\n          path: 'company',\n          model: 'Company'\n        }\n      ]\n    })\n    .populate({\n      path: 'inventories',\n      populate: [{\n        path: 'card',\n        model: 'Card'\n      }, {\n        path: 'retailer',\n        model: 'Retailer'\n      }]\n    })\n    .then(receipt => res.json(receipt))\n    .catch(async err => {\n      console.log('**************ERR IN GET RECEIPT**********');\n      console.log(err);\n      await ErrorLog.create({\n        method: 'getReceipt',\n        controller: 'receipt.controller',\n        revision: getGitRev(),\n        stack: err.stack,\n        error: err\n      });\n      return res.status(500).json(err);\n    });\n}\n"],"sourceRoot":"/home/ubuntu14/works/webstromProjects/gcmgr/gulp/es6"}